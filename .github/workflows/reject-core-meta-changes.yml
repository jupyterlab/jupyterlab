# This workflow fails in PRs with changes to packages/core-meta/core.package.json
# This file is auto-copied from jupyterlab/staging/package.json of the matching JupyterLab release.

name: 'Reject changes to core.package.json'
on:
  pull_request:
    paths:
      - 'packages/core-meta/core.package.json'

jobs:
  core-meta-check:
    runs-on: ubuntu-latest
    steps:
      - name: Fail if core.package.json is manually modified
        shell: bash
        run: |
          echo "## âŒ Manual Changes to \`core.package.json\` Detected" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "\`packages/core-meta/core.package.json\` is auto-generated and should not be manually modified." >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "This file is copied from \`jupyterlab/staging/package.json\` of the matching JupyterLab release." >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "Please revert your changes to this file." >> $GITHUB_STEP_SUMMARY
          exit 1
